[InternetShortcut]
URL=https://itty.bitty.app/itty.bitty-recipes/d/Send-recipes-to-itty.bitty-to-clean-them-up-and-make-them-available-offline/f/%F0%9F%8D%B3/#Make_itty.bitty/javascript:(async()%3D%3E%7Bconsole.log(%22Location%22%2Cdocument.location.href)%3Blet%20ib%3D%22https%3A%2F%2Fitty.bitty.app%22%3Bif(location.origin%3D%3Dib)%7Breturn%20location.reload()%7Dlet%20redirectToBlob%3Dasync(blobParts%2Ctype%2CnewTab%3D0)%3D%3E%7Bf%3Dnew%20FileReader%3Bf.onload%3Dfunction(e)%7Blet%20url%3Dib%2B%22%2F%23%2F%22%2Be.target.result%3Bconsole.log(%22Forwarding%20to%22%2Curl%2Curl.length)%3BnewTab%3Fwindow.open(url)%3Atop.location.href%3Durl%7D%3Blet%20blob%3Dnew%20Blob(blobParts%2C%7Btype%3Atype%2B%22%3Bcompress%3Dtrue%22%7D)%3Btry%7Bif(typeof%20CompressionStream!%3D%3D%22undefined%22)%7Bconst%20compressedStream%3Dblob.stream().pipeThrough(new%20CompressionStream(%22deflate%22))%3Blet%20b%3Dawait%20new%20Response(compressedStream).blob()%3Bf.readAsDataURL(new%20Blob(%5Bb%5D%2C%7Btype%3Atype%2B%22%3Bformat%3Dgz%22%7D))%3Breturn%7D%7Dcatch(e)%7Bconsole.warn(%22Error%3A%22%2Ce%2C%22Falling%20back%20to%20raw%20data%22%2CblobParts)%7Df.readAsDataURL(blob)%7D%3Blet%20selection%3Dwindow.getSelection()%3Bif(selection%26%26selection.rangeCount%3E0)%7Blet%20content%3Ddocument.getSelection().getRangeAt(0).cloneContents()%3Bconst%20tpl%3Ddocument.createElement(%22div%22)%3Btpl.appendChild(content)%3Breturn%20redirectToBlob(%5Btpl.innerHTML%5D%2C%22text%2Fhtml%3Bcharset%3Dutf-8%22)%7Dlet%20findRecipeNode%3Dr%3D%3E%7Bif(r%5B%22%40type%22%5D%3F.includes(%22Recipe%22)%7C%7Cr.recipeInstructions)return%20r%3Br%3DArray.isArray(r)%3Fr%3Ar%5B%22%40graph%22%5D%3Br%3Dr%3F.find((item%3D%3Eitem%5B%22%40type%22%5D%3F.includes(%22Recipe%22)))%3Breturn%20r%7D%3Blet%20findLDJsonRecipe%3Ddocument%3D%3E%7Blet%20lds%3DArray.from(document.querySelectorAll(%22script%5Btype%3D'application%2Fld%2Bjson'%5D%22)).map((e%3D%3Ee.innerText)).sort(((a%2Cb)%3D%3Ea.length-b.length))%3Bfor(const%20ld%20of%20lds)%7Blet%20r%3DfindRecipeNode(JSON.parse(ld))%3Bif(!r)continue%3Bdelete%20r.review%3Bdelete%20r.video%3Bif(!r.mainEntityOfPage)r.mainEntityOfPage%3Dlocation.href%3Breturn%20r%7D%7D%3Blet%20r%3DfindLDJsonRecipe(document)%3Bif(r)%7Bconsole.log(%22Found%20Recipe%22%2Cr)%3Blet%20type%3D%22application%2Fld%2Bjson%3Bcharset%3Dutf-8%22%3Breturn%20redirectToBlob(%5BJSON.stringify(r)%5D%2Ctype)%7Delse%7Bconsole.log(%22Parsing%20DOM%22%2Cr)%3Breturn%20redirectToBlob(%5Bdocument.documentElement.outerHTML.substring(0%2C75e4)%5D%2C%22text%2Fraw%2Bhtml%3Brender%3Dparse%3Bencode%3Dnone%3Bcharset%3Dutf-8%22)%7D%7D)()%3B%0A